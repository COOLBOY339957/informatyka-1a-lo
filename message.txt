using System.Reflection.Metadata.Ecma335;
using System.Runtime.InteropServices;
using System.Security.Cryptography.X509Certificates;

namespace gra
{
    class gra
    {
        static int[,] postacie = { { 200, 60, 0, 15 }, { 150, 30, 150, 20 }, { 120, 40, 30, 35 } }; //Postacie do wywboru pokolei
        static String[] nazwyPostaci = { "Wojownik", "Mag", "Bandyta" }; // Nazwy Postaci

        static int hp, attack, mana, gold = 0; //tworzenie statow jeszcze nie przypisane do postaci
        static int mhp, mattack, mmana, mgold = 0; // tworzenie statow potwora nie przypisane bo robi si nowe
        static String name = ""; // tworzenie nazwy 

        static void komunikat(string x)
        {
            Console.Clear(); // czyci konsole
            Console.WriteLine(x); // pisze tekst
            Console.ReadKey(); // czeka na cokolwiek
            Console.Clear(); // znpwu czysci
        }

        public static void wyborpostac()
        {
            while (hp == 0) // jeli bdzie zy numer to wr贸ci bo nie jest przypisane (mogo to by wszystko inne)
            {
                Console.WriteLine("Wybor postaci: \n Wojownik - 1 \n Mag - 2 \n bandyta - 3 "); // pisze
                int input = int.Parse(Console.ReadLine()); // pyta si o numer z wczesniejszego pytania
                if (input != 1 && input != 2 && input != 3) // jesli bed inne inz 1,2 lub 3 to wraca (  && znaczy i)
                {
                    komunikat("zy numer");
                }
                else
                {
                    int x = input - 1; // -1 bo indeksy zaczynaj si od zera a u偶ytkownik jest pytany od 1
                    hp = postacie[x, 0]; // przypisuje wszystkie staty z wczeniejszej listy postaci
                    attack = postacie[x, 1];
                    mana = postacie[x, 2];
                    gold = postacie[x, 3];
                    name = nazwyPostaci[x];
                }
            }
        }

        public static void statyporwora()
        {
            Random rnd = new Random(); // tworzy randoma
            mhp = rnd.Next(20, 50); // przypisuje randomowe liczby od x, do ,x
            mattack = rnd.Next(15, 50);
            mmana = rnd.Next(5, 20);
            mgold = rnd.Next(3, 40);
        }

        public static void heal()
        {
            if (mana >= 20) // sprawdza czy masz wystarczajco many
            {
                hp += 15; // dodaje hp z heala
                mana -= 20; // zabiera mane z u偶ycia
                komunikat("U偶ye Heala (+15 hp  -20 many)");

            }
            else
            {
                komunikat("Brak many"); // jeli nie masz many to no
            }
        }

        public static void boost() // to samo co wczeniejszy
        {
            if (mana >= 30)
            {
                hp += 10;
                attack += 10;
                mana -= 30;
                komunikat("U偶ye Boosta (+10 hp   +10 dmg   -30 many)");
            }
            else
            {
                komunikat("Brak many");
            }
        }

        public static void sklep()
        {
            Console.Clear(); // clear
            Console.WriteLine("\n *Widzisz ceny na tablic* ");
            Console.WriteLine("\n1 - +25hp = 5 zota \n 2 - +20 ataku = 15 zota \n 3 - +50 many = 8 zota \n dowolny inny numer - wyjdz");
            int input = int.Parse(Console.ReadLine()); // pyta si
            switch (input)
            {
                case 1: // jesli input to 1
                    Heal(); // wywouje(u偶ywa) heala
                    break;
                case 2:
                    Bron(); // to samo co wczeniej
                    break;
                case 3:
                    AddMana(); // x
                    break;
                default:
                    komunikat("\nWychodzisz ze sklepu"); // jeli wcinie inny numerek to wychodzi
                    break;
            }
        }


        static void AddMana()
        {
            if (gold - 8 < 0) // sprawdza czy nasz wystarczajco hajsu
            {
                komunikat($"\nnie masz wystarczajco pienidzy\n Potrzebujesz jeszcze {8 - gold} zota"); // ile potrzebujesz
            }
            else // jeli masz
            {
                gold -= 8; // zabiera ci hajs
                mana += 50; // daje ci mane
            }
        }

        static void Bron() // to samo ...
        {
            if ((gold - 15) < 0)
            {
                komunikat($"\nnie masz wystarczajco pienidzy\n Potrzebujesz jeszcze {15 - gold} zota");
            }
            else
            {
                gold -= 15;
                attack += 20;
            }
        }

        static void Heal() // ...
        {
            if ((gold - 5) < 0)
            {
                komunikat($"\nnie masz wystarczajco pienidzy\n Potrzebujesz jeszcze {5 - gold} zota");
            }
            else
            {
                gold -= 5;
                hp += 25;
            }
        }

        static void Main() // g贸wna funkcja w grze
        {
            wyborpostac(); // wywouje 
            while (hp > 0) // dopoki nie zdechniesz to robi to wszystko
            {

                Console.Clear(); // clear
                Console.WriteLine($"\n{name}:\n hp - {hp}\n dmg - {attack}\n mana - {mana}\n zoto - {gold}"); // wypisuje staty
                Console.WriteLine("\n=========================\n");
                Console.WriteLine("\nCo chcesz zrobi? \n 1 - Idz do sklepu\n 2 - Idz na wyprawe");
                int inp = int.Parse(Console.ReadLine()); // pyta si
                if (inp == 1) // jeli dosta 1 to idzie do sklepu
                {
                    sklep(); // wywouje
                }
                else if (inp == 2) // jeli na wyprawe
                {
                    Console.Clear();
                    statyporwora(); // wywouje to co wczeniej byo te takie randomy
                    wyprawa(); // wychodzi

                }
            }
        }



        static void walka()
        {
            Console.Clear();
            Console.WriteLine("Walka");

            komunikat($"\nPotw贸r zadaje ci {mattack}"); // m贸wi ile zada ci
            hp -= mattack;
            komunikat($"\nTy zadajesz mu {attack}"); // ile zadae ty
            mhp -= attack;

            if (hp <= 0) // jeli masz mniej ni偶 0 to zdychasz
            {
                komunikat("UMARE!!!!");
                return;
            }
            if (mhp <= 0) // jeli on ma
            {
                komunikat($"\nzabierasz potworowi {mgold} zota i pobierasz kawaki many z jego duszy");
                gold += mgold; // loocisz borowika do zera 
                mana += mmana;
            }
        }

        static void zaklecia()
        {

            Console.Clear();
            Console.WriteLine("\nZaklcia\n 1 - heal(+15   hp   -20 many)\n 3 - Boost(+10 hp   +10 dmg   -30 many)");
            int x = int.Parse(Console.ReadLine());
            switch (x)
            {
                case 1: // jeli 1 
                    heal(); // czarymary heal
                    break;
                case 2:
                    boost(); // czarymary boost
                    break;
                default:
                    komunikat("\nzy numer"); // jeste idiot i wpisae zy numer
                    break;
            }
        }

        static void ucieczka()
        {
            komunikat("\nUciekasz"); // robisz to co ka偶dy szanowany si m偶czyzna po wynikach ci偶owych
            Random rnd = new Random(); // random
            int ucieczka = rnd.Next(1, 6); // losuje ci czy uciekniesz
            if (ucieczka == 2 || ucieczka == 5) // jeli miae 2 lub 5 to uciekasz ( || to jest lub)
            {
                komunikat("\nUdaje ci si uciec"); // wow
                mhp = 0; // wtedy wywala tamto spotkanie go 
            }
            else // inaczej to dostajesz na pizde od niego
            {
                hp -= (mattack * 2); // jego attack razy 2  
                komunikat("\nNie udaje ci si uciec potw贸r zadaje ci podw贸jne obra偶enia");
            }
        }

        static void wyprawa()
        {
            while (mhp > 0) // to co byo powy偶ej napisane o tyn mhp = 0 to tu dziaa
            {
                Console.Clear();
                Console.WriteLine("\n Spotykasz potwora\nCo robisz?\n 1 - Walczysz\n 2 - U偶ywasz Zakl\n 3 - Spr贸buj ucieczki");
                Console.WriteLine($"\n Potw贸r: hp - {mhp}\n dmg - {mattack}\n mana - {mmana}\n zoto - {mgold}"); // ile on ma hp itd
                int input = int.Parse(Console.ReadLine());
                switch (input)
                {
                    case 1:
                        walka(); // wywouje funkcj
                        break;
                    case 2:
                        zaklecia(); // ...
                        break;
                    case 3:
                        ucieczka(); // ...
                        break;
                    default:
                        komunikat("zy numer");
                        break;
                }
            }
        }
    }
}
// koniec mam nadzieje na 6 
